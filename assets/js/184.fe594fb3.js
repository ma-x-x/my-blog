(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{715:function(s,t,n){"use strict";n.r(t);var a=n(2),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"概述"}},[s._v("概述")]),s._v(" "),n("p",[s._v("Systemd 设计的目标是，为系统的启动和管理提供一整套的完整解决方案。")]),s._v(" "),n("p",[s._v("根据 Linux 惯例，字母 "),n("code",[s._v("d")]),s._v(" 是守护进程（daemon）的缩写。Systemd 这个名字的含义，就是它要守护整个系统。")]),s._v(" "),n("p",[s._v("Systemd 的优点是功能强大，使用方便，缺点是体系庞大，非常复杂。事实上，现在还有很多人反对使用 Systemd，理由就是它过于复杂，与操作系统的其他部分强耦合，违反 ”keep simple，keep stupid“ 的 Unix 哲学。")]),s._v(" "),n("blockquote",[n("p",[s._v("原文实在是太详细了，实在没必要重复整理。")])]),s._v(" "),n("h2",{attrs:{id:"实战"}},[s._v("实战")]),s._v(" "),n("p",[s._v("模拟一个操作基本的操作流程：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 有些软件支持 Systemd，安装时，会自动在 `/usr/lib/systemd/system` 目录添加一个配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后就可以让其开机自启了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" httpd\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上面的命令相当于在 `/etc/systemd/system` 目录添加一个符号链接，指向 `/usr/lib/systemd/system` 里面的 `httpd.service` 文件。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这是因为开机时，Systemd 只执行 `/etc/systemd/system` 目录里面的配置文件。这也意味着，如果把修改后的配置文件放在该目录，就可以达到覆盖原始配置的效果。")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置开机启动以后，软件并不会立即启动，必须等到下一次开机。如果想现在就运行该软件，那么要执行 `systemctl start` 命令。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start httpd\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行上面的命令以后，有可能启动失败，因此要用systemctl status命令查看一下该服务的状态。")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终止正在运行的服务，需要执行 `systemctl stop` 命令。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl stop httpd.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 有时候，该命令可能没有响应，服务停不下来。这时候就不得不"杀进程"了，向正在运行的进程发出kill信号。')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" httpd.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此外，重启服务要执行systemctl restart命令。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart httpd.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一个服务怎么启动，完全由它的配置文件决定。")]),s._v("\nsystemctl "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" sshd.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改配置文件以后，需要重新加载配置文件，然后重新启动相关服务。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新加载配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启相关服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart foobar\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h2",{attrs:{id:"系统管理"}},[s._v("系统管理")]),s._v(" "),n("p",[s._v("Systemd 并不是一个命令，而是一组命令，涉及系统管理的方方面面。")]),s._v(" "),n("h3",{attrs:{id:"_1-systemctl"}},[s._v("1. systemctl")]),s._v(" "),n("p",[n("code",[s._v("systemctl")]),s._v(" 是 Systemd 的主命令，用于管理系统。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启系统")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭系统，切断电源")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl poweroff\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CPU停止工作")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("halt")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 暂停系统")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("suspend")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 让系统进入冬眠状态")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl hibernate\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 让西荣进入交互式休眠状态")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl hybrid-sleep\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动进入救援状态")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl rescue\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h3",{attrs:{id:"_2-systemd-analyze"}},[s._v("2. systemd-analyze")]),s._v(" "),n("p",[n("code",[s._v("systemd-analyze")]),s._v(" 命令用于查看启动耗时。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看启动耗时")]),s._v("\nsystemd-analyze                                                                                       \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看每个服务的启动耗时")]),s._v("\nsystemd-analyze blame\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示瀑布状的启动过程流")]),s._v("\nsystemd-analyze critical-chain\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示指定服务的启动流")]),s._v("\nsystemd-analyze critical-chain atd.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h3",{attrs:{id:"_3-hostnamectl"}},[s._v("3. hostnamectl")]),s._v(" "),n("p",[n("code",[s._v("hostnamectl")]),s._v("命令用于查看当前主机的信息。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示当前主机的信息")]),s._v("\nhostnamectl\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置主机名。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" hostnamectl set-hostname rhel7\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"_4-localectl"}},[s._v("4. localectl")]),s._v(" "),n("p",[n("code",[s._v("localectl")]),s._v("命令用于查看本地化设置。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看本地化设置")]),s._v("\nlocalectl\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置本地化参数。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" localectl set-locale "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANG")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("en_GB.utf8\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" localectl set-keymap en_GB\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"_5-timedatectl"}},[s._v("5. timedatectl")]),s._v(" "),n("p",[n("code",[s._v("timedatectl")]),s._v("命令用于查看当前时区设置。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前时区设置")]),s._v("\ntimedatectl\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有可用的时区")]),s._v("\ntimedatectl list-timezones                                                                                   \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置当前时区")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" timedatectl set-timezone America/New_York\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" timedatectl set-time YYYY-MM-DD\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" timedatectl set-time HH:MM:SS\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"_6-loginctl"}},[s._v("6. loginctl")]),s._v(" "),n("p",[n("code",[s._v("loginctl")]),s._v("命令用于查看当前登录的用户。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出当前session")]),s._v("\nloginctl list-sessions\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出当前登录用户")]),s._v("\nloginctl list-users\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出显示指定用户的信息")]),s._v("\nloginctl show-user ruanyf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"unit"}},[s._v("Unit")]),s._v(" "),n("p",[s._v("Systemd 可以管理所有系统资源。不同的资源统称为 Unit（单位）。")]),s._v(" "),n("p",[s._v("Unit 一共分成12种。")]),s._v(" "),n("blockquote",[n("ul",[n("li",[s._v("Service unit：系统服务")]),s._v(" "),n("li",[s._v("Target unit：多个 Unit 构成的一个组")]),s._v(" "),n("li",[s._v("Device Unit：硬件设备")]),s._v(" "),n("li",[s._v("Mount Unit：文件系统的挂载点")]),s._v(" "),n("li",[s._v("Automount Unit：自动挂载点")]),s._v(" "),n("li",[s._v("Path Unit：文件或路径")]),s._v(" "),n("li",[s._v("Scope Unit：不是由 Systemd 启动的外部进程")]),s._v(" "),n("li",[s._v("Slice Unit：进程组")]),s._v(" "),n("li",[s._v("Snapshot Unit：Systemd 快照，可以切回某个快照")]),s._v(" "),n("li",[s._v("Socket Unit：进程间通信的 socket")]),s._v(" "),n("li",[s._v("Swap Unit：swap 文件")]),s._v(" "),n("li",[s._v("Timer Unit：定时器")])])]),s._v(" "),n("p",[n("code",[s._v("systemctl list-units")]),s._v(" 命令可以查看当前系统的所有 Unit 。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出正在运行的 Unit")]),s._v("\nsystemctl list-units\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有Unit，包括没有找到配置文件的或者启动失败的")]),s._v("\nsystemctl list-units --all\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有没有运行的 Unit")]),s._v("\nsystemctl list-units --all --state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("inactive\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有加载失败的 Unit")]),s._v("\nsystemctl list-units --failed\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有正在运行的、类型为 service 的 Unit")]),s._v("\nsystemctl list-units --type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h3",{attrs:{id:"_1-unit-的状态"}},[s._v("1. Unit 的状态")]),s._v(" "),n("p",[n("code",[s._v("systemctl status")]),s._v(" 命令用于查看系统状态和单个 Unit 的状态。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示系统状态")]),s._v("\nsystemctl status\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示单个 Unit 的状态")]),s._v("\nsysystemctl status bluetooth.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示远程主机的某个 Unit 的状态")]),s._v("\nsystemctl -H root@rhel7.example.com status httpd.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("除了 "),n("code",[s._v("status")]),s._v(" 命令，"),n("code",[s._v("systemctl")]),s._v(" 还提供了三个查询状态的简单方法，主要供脚本内部的判断语句使用。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示某个 Unit 是否正在运行")]),s._v("\nsystemctl is-active application.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示某个 Unit 是否处于启动失败状态")]),s._v("\nsystemctl is-failed application.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示某个 Unit 服务是否建立了启动链接")]),s._v("\nsystemctl is-enabled application.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h3",{attrs:{id:"_2-unit-管理"}},[s._v("2. Unit 管理")]),s._v(" "),n("p",[n("strong",[s._v("对于用户来说，最常用的是下面这些命令，用于启动和停止 Unit（主要是 service）。")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 立即启动一个服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start apache.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 立即停止一个服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl stop apache.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启一个服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart apache.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 杀死一个服务的所有子进程")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" apache.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新加载一个服务的配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl reload apache.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重载所有修改过的配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示某个 Unit 的所有底层参数")]),s._v("\nsystemctl show httpd.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示某个 Unit 的指定属性的值")]),s._v("\nsystemctl show -p CPUShares httpd.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置某个 Unit 的指定属性")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl set-property httpd.service "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CPUShares")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h3",{attrs:{id:"_3-依赖关系"}},[s._v("3. 依赖关系")]),s._v(" "),n("p",[s._v("Unit 之间存在依赖关系：A 依赖于 B，就意味着 Systemd 在启动 A 的时候，同时会去启动 B。")]),s._v(" "),n("p",[n("code",[s._v("systemctl list-dependencies")]),s._v(" 命令列出一个 Unit 的所有依赖。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl list-dependencies nginx.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("上面命令的输出结果之中，有些依赖是 Target 类型（详见下文），默认不会展开显示。如果要展开 Target，就需要使用 "),n("code",[s._v("--all")]),s._v(" 参数。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl list-dependencies --all nginx.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"unit-的配置文件"}},[s._v("Unit 的配置文件")]),s._v(" "),n("p",[s._v("每一个 Unit 都有一个配置文件，告诉 Systemd 怎么启动这个 Unit 。")]),s._v(" "),n("p",[s._v("Systemd 默认从目录 "),n("code",[s._v("/etc/systemd/system/")]),s._v(" 读取配置文件。但是，里面存放的大部分文件都是符号链接，指向目录 "),n("code",[s._v("/usr/lib/systemd/system/")]),s._v("，真正的配置文件存放在那个目录。")]),s._v(" "),n("p",[n("code",[s._v("systemctl enable")]),s._v(" 命令用于在上面两个目录之间，建立符号链接关系。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" clamd@scan.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等同于")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/usr/lib/systemd/system/clamd@scan.service'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/etc/systemd/system/multi-user.target.wants/clamd@scan.service'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("如果配置文件里面设置了开机启动，"),n("code",[s._v("systemctl enable")]),s._v(" 命令相当于激活开机启动。")]),s._v(" "),n("p",[s._v("与之对应的，"),n("code",[s._v("systemctl disable")]),s._v(" 命令用于在两个目录之间，撤销符号链接关系，相当于撤销开机启动。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl disable clamd@scan.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("配置文件的后缀名，就是该 Unit 的种类，比如 "),n("code",[s._v("sshd.socket")]),s._v(" 。如果省略，Systemd 默认后缀名为 "),n("code",[s._v(".service")]),s._v("，所以 "),n("code",[s._v("sshd")]),s._v(" 会被理解成 "),n("code",[s._v("sshd.service")]),s._v(" 。")]),s._v(" "),n("h3",{attrs:{id:"_1-配置文件的状态"}},[s._v("1. 配置文件的状态")]),s._v(" "),n("p",[n("code",[s._v("systemctl list-unit-files")]),s._v(" 命令用于列出所有配置文件。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有配置文件")]),s._v("\nsystemctl list-unit-files\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出指定类型的配置文件")]),s._v("\nsystemctl list-unit-files --type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("这个命令会输出一个列表。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl list-unit-files\n\nUNIT FILE              STATE\nchronyd.service        enabled\nclamd@.service         static\nclamd@scan.service     disabled\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("这个列表显示每个配置文件的状态，一共有四种。")]),s._v(" "),n("ul",[n("li",[s._v("enabled：已建立启动链接")]),s._v(" "),n("li",[s._v("disabled：没建立启动链接")]),s._v(" "),n("li",[s._v("static：该配置文件没有 "),n("code",[s._v("[Install]")]),s._v(" 部分（无法执行），只能作为其他配置文件的依赖")]),s._v(" "),n("li",[s._v("masked：该配置文件被禁止建立启动链接")])]),s._v(" "),n("p",[s._v("注意，从配置文件的状态无法看出，该 Unit 是否正在运行。这必须执行前面提到的 "),n("code",[s._v("systemctl status")]),s._v(" 命令。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl status bluetooth.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("一旦修改配置文件，就要让 SystemD 重新加载配置文件，然后重新启动，否则修改不会生效。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart httpd.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_2-配置文件的格式"}},[s._v("2. 配置文件的格式")]),s._v(" "),n("p",[s._v("配置文件就是普通的文本文件，可以用文本编辑器打开。")]),s._v(" "),n("p",[n("code",[s._v("systemctl cat")]),s._v(" 命令可以查看配置文件的内容。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" atd.service\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ATD daemon\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/atd\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("从上面的输出可以看到，配置文件分成几个区块。每个区块的第一行，是用方括号表示的区别名，比如 "),n("code",[s._v("[Unit]")]),s._v(" 。注意，配置文件的区块名和字段名，都是大小写敏感的。")]),s._v(" "),n("p",[s._v("每个区块内部是一些等号连接的键值对。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Section"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Directive1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("value\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Directive2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("value\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("注意，键值对的等号两侧不能有空格。")]),s._v(" "),n("h3",{attrs:{id:"_3-配置文件的区块"}},[s._v("3. 配置文件的区块")]),s._v(" "),n("p",[n("code",[s._v("[Unit]")]),s._v(" 区块通常是配置文件的第一个区块，用来定义 Unit 的元数据，以及配置与其他 Unit 的关系。它的主要字段如下：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("Description")]),s._v("：简短描述")]),s._v(" "),n("li",[n("code",[s._v("Documentation")]),s._v("：文档地址")]),s._v(" "),n("li",[n("code",[s._v("Requires")]),s._v("：当前 Unit 依赖的其他 Unit，如果它们没有运行，当前 Unit 会启动失败")]),s._v(" "),n("li",[n("code",[s._v("Wants")]),s._v("：与当前 Unit 配合的其他 Unit，如果它们没有运行，当前 Unit 不会启动失败")]),s._v(" "),n("li",[n("code",[s._v("BindsTo")]),s._v("：与"),n("code",[s._v("Requires")]),s._v("类似，它指定的 Unit 如果退出，会导致当前 Unit 停止运行")]),s._v(" "),n("li",[n("code",[s._v("Before")]),s._v("：如果该字段指定的 Unit 也要启动，那么必须在当前 Unit 之后启动")]),s._v(" "),n("li",[n("code",[s._v("After")]),s._v("：如果该字段指定的 Unit 也要启动，那么必须在当前 Unit 之前启动")]),s._v(" "),n("li",[n("code",[s._v("Conflicts")]),s._v("：这里指定的 Unit 不能与当前 Unit 同时运行")]),s._v(" "),n("li",[n("code",[s._v("Condition...")]),s._v("：当前 Unit 运行必须满足的条件，否则不会运行")]),s._v(" "),n("li",[n("code",[s._v("Assert...")]),s._v("：当前 Unit 运行必须满足的条件，否则会报启动失败")])]),s._v(" "),n("p",[n("code",[s._v("[Install]")]),s._v(" 通常是配置文件的最后一个区块，用来定义如何启动，以及是否开机启动。它的主要字段如下：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("WantedBy")]),s._v("：它的值是一个或多个 Target，当前 Unit 激活时（enable）符号链接会放入"),n("code",[s._v("/etc/systemd/system")]),s._v("目录下面以 Target 名 + "),n("code",[s._v(".wants")]),s._v("后缀构成的子目录中")]),s._v(" "),n("li",[n("code",[s._v("RequiredBy")]),s._v("：它的值是一个或多个 Target，当前 Unit 激活时，符号链接会放入"),n("code",[s._v("/etc/systemd/system")]),s._v("目录下面以 Target 名 + "),n("code",[s._v(".required")]),s._v("后缀构成的子目录中")]),s._v(" "),n("li",[n("code",[s._v("Alias")]),s._v("：当前 Unit 可用于启动的别名")]),s._v(" "),n("li",[n("code",[s._v("Also")]),s._v("：当前 Unit 激活（enable）时，会被同时激活的其他 Unit")])]),s._v(" "),n("p",[n("code",[s._v("[Service]")]),s._v(" 区块用来 Service 的配置，只有 Service 类型的 Unit 才有这个区块。它的主要字段如下：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("Type")]),s._v("：定义启动时的进程行为。它有以下几种值。")]),s._v(" "),n("li",[n("code",[s._v("Type=simple")]),s._v("：默认值，执行"),n("code",[s._v("ExecStart")]),s._v("指定的命令，启动主进程")]),s._v(" "),n("li",[n("code",[s._v("Type=forking")]),s._v("：以 fork 方式从父进程创建子进程，创建后父进程会立即退出")]),s._v(" "),n("li",[n("code",[s._v("Type=oneshot")]),s._v("：一次性进程，Systemd 会等当前服务退出，再继续往下执行")]),s._v(" "),n("li",[n("code",[s._v("Type=dbus")]),s._v("：当前服务通过D-Bus启动")]),s._v(" "),n("li",[n("code",[s._v("Type=notify")]),s._v("：当前服务启动完毕，会通知"),n("code",[s._v("Systemd")]),s._v("，再继续往下执行")]),s._v(" "),n("li",[n("code",[s._v("Type=idle")]),s._v("：若有其他任务执行完毕，当前服务才会运行")]),s._v(" "),n("li",[n("code",[s._v("ExecStart")]),s._v("：启动当前服务的命令")]),s._v(" "),n("li",[n("code",[s._v("ExecStartPre")]),s._v("：启动当前服务之前执行的命令")]),s._v(" "),n("li",[n("code",[s._v("ExecStartPost")]),s._v("：启动当前服务之后执行的命令")]),s._v(" "),n("li",[n("code",[s._v("ExecReload")]),s._v("：重启当前服务时执行的命令")]),s._v(" "),n("li",[n("code",[s._v("ExecStop")]),s._v("：停止当前服务时执行的命令")]),s._v(" "),n("li",[n("code",[s._v("ExecStopPost")]),s._v("：停止当其服务之后执行的命令")]),s._v(" "),n("li",[n("code",[s._v("RestartSec")]),s._v("：自动重启当前服务间隔的秒数")]),s._v(" "),n("li",[n("code",[s._v("Restart")]),s._v("：定义何种情况 Systemd 会自动重启当前服务，可能的值包括"),n("code",[s._v("always")]),s._v("（总是重启）、"),n("code",[s._v("on-success")]),s._v("、"),n("code",[s._v("on-failure")]),s._v("、"),n("code",[s._v("on-abnormal")]),s._v("、"),n("code",[s._v("on-abort")]),s._v("、"),n("code",[s._v("on-watchdog")])]),s._v(" "),n("li",[n("code",[s._v("TimeoutSec")]),s._v("：定义 Systemd 停止当前服务之前等待的秒数")]),s._v(" "),n("li",[n("code",[s._v("Environment")]),s._v("：指定环境变量")])]),s._v(" "),n("p",[s._v("Unit 配置文件的完整字段清单，请参考"),n("a",{attrs:{href:"https://www.freedesktop.org/software/systemd/man/systemd.unit.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1),s._v("。")]),s._v(" "),n("h2",{attrs:{id:"target"}},[s._v("Target")]),s._v(" "),n("p",[s._v("启动计算机的时候，需要启动大量的 Unit。如果每一次启动，都要一一写明本次启动需要哪些 Unit，显然非常不方便。Systemd 的解决方案就是 Target。")]),s._v(" "),n("p",[s._v('简单说，Target 就是一个 Unit 组，包含许多相关的 Unit 。启动某个 Target 的时候，Systemd 就会启动里面所有的 Unit。从这个意义上说，Target 这个概念类似于"状态点"，启动某个 Target 就好比启动到某种状态。')]),s._v(" "),n("p",[s._v("传统的 "),n("code",[s._v("init")]),s._v(" 启动模式里面，有 RunLevel 的概念，跟 Target 的作用很类似。不同的是，RunLevel 是互斥的，不可能多个 RunLevel 同时启动，但是多个 Target 可以同时启动。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前系统的所有 Target")]),s._v("\nsystemctl list-unit-files --type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("target\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看一个 Target 包含的所有 Unit")]),s._v("\nsystemctl list-dependencies multi-user.target\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看启动时的默认 Target")]),s._v("\nsystemctl get-default\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置启动时的默认 Target")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl set-default multi-user.target\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换 Target 时，默认不关闭前一个 Target 启动的进程，")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl isolate 命令改变这种行为，")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭前一个 Target 里面所有不属于后一个 Target 的进程")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl isolate multi-user.target\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("Target 与 传统 RunLevel 的对应关系如下。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("Traditional runlevel      New target name     Symbolically linked to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\nRunlevel "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    runlevel0.target -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" poweroff.target\nRunlevel "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    runlevel1.target -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" rescue.target\nRunlevel "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    runlevel2.target -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" multi-user.target\nRunlevel "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    runlevel3.target -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" multi-user.target\nRunlevel "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    runlevel4.target -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" multi-user.target\nRunlevel "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    runlevel5.target -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" graphical.target\nRunlevel "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    runlevel6.target -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" reboot.target\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("它与 "),n("code",[s._v("init")]),s._v(" 进程的主要差别如下。")]),s._v(" "),n("p",[n("strong",[s._v("（1）默认的 RunLevel")]),s._v("（在"),n("code",[s._v("/etc/inittab")]),s._v("文件设置）现在被默认的 Target 取代，位置是"),n("code",[s._v("/etc/systemd/system/default.target")]),s._v("，通常符号链接到"),n("code",[s._v("graphical.target")]),s._v("（图形界面）或者"),n("code",[s._v("multi-user.target")]),s._v("（多用户命令行）。")]),s._v(" "),n("p",[n("strong",[s._v("（2）启动脚本的位置")]),s._v("，以前是"),n("code",[s._v("/etc/init.d")]),s._v("目录，符号链接到不同的 RunLevel 目录 （比如"),n("code",[s._v("/etc/rc3.d")]),s._v("、"),n("code",[s._v("/etc/rc5.d")]),s._v("等），现在则存放在"),n("code",[s._v("/lib/systemd/system")]),s._v("和"),n("code",[s._v("/etc/systemd/system")]),s._v("目录。")]),s._v(" "),n("p",[n("strong",[s._v("（3）配置文件的位置")]),s._v("，以前"),n("code",[s._v("init")]),s._v("进程的配置文件是"),n("code",[s._v("/etc/inittab")]),s._v("，各种服务的配置文件存放在"),n("code",[s._v("/etc/sysconfig")]),s._v("目录。现在的配置文件主要存放在"),n("code",[s._v("/lib/systemd")]),s._v("目录，在"),n("code",[s._v("/etc/systemd")]),s._v("目录里面的修改可以覆盖原始设置。")]),s._v(" "),n("h2",{attrs:{id:"日志管理"}},[s._v("日志管理")]),s._v(" "),n("p",[s._v("Systemd 统一管理所有 Unit 的启动日志。带来的好处就是，可以只用"),n("code",[s._v("journalctl")]),s._v(" 一个命令，查看所有日志（内核日志和应用日志）。日志的配置文件是 "),n("code",[s._v("/etc/systemd/journald.conf")]),s._v(" 。")]),s._v(" "),n("p",[n("code",[s._v("journalctl")]),s._v(" 功能强大，用法非常多。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有日志（默认情况下 ，只保存本次启动的日志）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看内核日志（不显示应用日志）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -k\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看系统本次启动的日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -b\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -b -0\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看上一次启动的日志（需更改设置）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -b -1\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看指定时间的日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl --since"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2012-10-30 18:17:16"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl --since "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"20 min ago"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl --since yesterday\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl --since "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2015-01-10"')]),s._v(" --until "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2015-01-11 03:00"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl --since 09:00 --until "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1 hour ago"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示尾部的最新10行日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示尾部指定行数的日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -n "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 实时滚动显示最新日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -f\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看指定服务的日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl /usr/lib/systemd/systemd\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看指定进程的日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("_PID")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看某个路径的脚本的日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl /usr/bin/bash\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看指定用户的日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("_UID")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v(" --since today\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看某个 Unit 的日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -u nginx.service\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -u nginx.service --since today\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 实时滚动显示某个 Unit 的最新日志")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -u nginx.service -f\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 合并显示多个 Unit 的日志")]),s._v("\njournalctl -u nginx.service -u php-fpm.service --since today\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看指定优先级（及其以上级别）的日志，共有8级")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 0: emerg")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1: alert")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2: crit")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3: err")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4: warning")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5: notice")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6: info")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 7: debug")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -p err -b\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志默认分页输出，--no-pager 改为正常的标准输出")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl --no-pager\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以 JSON 格式（单行）输出")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -b -u nginx.service -o json\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以 JSON 格式（多行）输出，可读性更好")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -b -u nginx.serviceqq\n -o json-pretty\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示日志占据的硬盘空间")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl --disk-usage\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定日志文件占据的最大空间")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl --vacuum-size"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1G\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定日志文件保存多久")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl --vacuum-time"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("1years\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br")])]),n("h2",{attrs:{id:"参考文章"}},[s._v("参考文章")]),s._v(" "),n("p",[n("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文：Systemd 入门教程"),n("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);