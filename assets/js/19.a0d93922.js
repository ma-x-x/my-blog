(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{550:function(s,a,e){"use strict";e.r(a);var n=e(2),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"获取镜像"}},[s._v("获取镜像")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"title"},[s._v("格式")]),e("p",[e("code",[s._v("docker pull [OPTIONS] NAME[:TAG|@DIGEST]")]),s._v("。")]),s._v(" "),e("p",[s._v("NAME 是镜像仓库名称（用来区分镜像），TAG 是镜像的标签（往往用来表示版本信息）。若不指定 TAG 则默认选择 "),e("code",[s._v("latest")]),s._v("，即最新版本。")])]),e("p",[s._v("在获取镜像前可以查询是否存在对应的镜像。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker search [OPTIONS] TERM")]),s._v("\ndocker search ubuntu\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"镜像信息"}},[s._v("镜像信息")]),s._v(" "),e("h3",{attrs:{id:"_1-所有镜像概览"}},[s._v("1. 所有镜像概览")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker images\n\nREPOSITORY            TAG                 IMAGE ID            CREATED             SIZE\nnginx                 v2                  c7e8f4f26fef        About an hour ago   132MB\nnginx                 latest              0901fa9da894        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" days ago          132MB\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# `REPOSITORY` 来自于哪个仓库，比如ubuntu表示ubuntu系列的基础镜像")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# `TAG` 镜像的标签信息，比如18.04、latest表示不同的版本信息。标签只是标记，并不能标识镜像内容")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# `IMAGE ID` 镜像的ID（唯一标识镜像），如果两个镜像的ID相同，说明它们实际上指向了同一个镜像，只是具有不同标签名称而已")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# `CREATED` 创建时间，说明镜像最后的更新时间")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# `SIZE` 镜像大小，优秀的镜像往往体积都较小")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h3",{attrs:{id:"_2-指定镜像详细"}},[s._v("2. 指定镜像详细")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker inspect [OPTIONS] NAME|ID [NAME|ID...]")]),s._v("\ndocker inspect ubuntu:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"_3-镜像历史"}},[s._v("3. 镜像历史")]),s._v(" "),e("p",[s._v("镜像文件是由多个层组成，可查看每个层的创建信息。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker history [OPTIONS] IMAGE")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" ubuntu:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"创建镜像"}},[s._v("创建镜像")]),s._v(" "),e("p",[s._v("创建镜像的方法主要有三种：基于已有镜像的内容创建（commit）、基于本地模板导入（import）、基于 Dockerfile 创建（build）。")]),s._v(" "),e("h3",{attrs:{id:"_1-已有容器"}},[s._v("1. 已有容器")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对一个镜像进行修改后")]),s._v("\ndocker commit -m "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"修改了默认首页"')]),s._v(" webserver nginx:new\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证")]),s._v("\ndocker images\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"_2-本地模板"}},[s._v("2. 本地模板")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" http://example.com/exampleimage.tgz\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" /path/to/exampleimage.tgz\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 还可以利用 `STDIN`")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" exampleimage.tgz "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" - exampleimagelocal:new\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证")]),s._v("\ndocker images\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"_3-dockerfile"}},[s._v("3. Dockerfile")]),s._v(" "),e("p",[e("code",[s._v("Dockerfile")]),s._v(" 是一个文本文件，利用给定的指令描述基于某个父镜像创建新镜像的过程。")]),s._v(" "),e("div",{staticClass:"language-dockerfile line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ubuntu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("18.04\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" . /app\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" make /app\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" python /app/app.py\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker build [OPTIONS] PATH | URL | -")]),s._v("\ndocker build https://github.com/creack/docker-firefox\ndocker build -t nginx:ttt\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"修改镜像"}},[s._v("修改镜像")]),s._v(" "),e("h3",{attrs:{id:"_1-添加镜像标签"}},[s._v("1. 添加镜像标签")]),s._v(" "),e("p",[s._v("仅添加镜像标签，实际 "),e("code",[s._v("IMAGE ID")]),s._v(" 指向同一个。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker tag ubuntu:latest myubuntu:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-删除镜像"}},[s._v("2. 删除镜像")]),s._v(" "),e("p",[s._v("需注意 "),e("code",[s._v("docker rmi")]),s._v(" 才是删除镜像，而 "),e("code",[s._v("docker rm")]),s._v(" 是删除容器。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rmi [OPTIONS] IMAGE [IMAGE...]")]),s._v("\ndocker rmi ubuntu:latest\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Error response from daemon: conflict: unable to remove repository reference "ubuntu:latest" (must force) - container b0f36e5ede8d is using its referenced image adafef2e596e')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 正在使用中，需要先解除容器")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" b0f36e5ede8d\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解除后再删除镜像，删除镜像还可以使用 `IMAGE ID`")]),s._v("\ndocker rmi adafef2e596e\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"_3-清理镜像"}},[s._v("3. 清理镜像")]),s._v(" "),e("p",[s._v("系统中可能会遗留一些临时的镜像文件。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker image prune "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"分享镜像"}},[s._v("分享镜像")]),s._v(" "),e("h3",{attrs:{id:"_1-save"}},[s._v("1. save")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker images "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出镜像")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker save [OPTIONS] IMAGE [IMAGE...]")]),s._v("\ndocker save -o ubuntu_18.04.tar ubuntu:18.04\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"_2-load"}},[s._v("2. load")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker load [OPTIONS]")]),s._v("\ndocker load -i ubuntu_18.04.tar\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"_3-hub"}},[s._v("3. Hub")]),s._v(" "),e("p",[s._v("还可以直接分享到 Docker Hub 公共仓库，这需要在官网注册帐号。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 模拟 nginx 打个新 tag")]),s._v("\ndocker tag nginx:latest username/nginx:latest\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# push")]),s._v("\ndocker push username/nginx:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);